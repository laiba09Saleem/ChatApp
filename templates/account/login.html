{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block head_title %}{% trans "Sign In" %}{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <div class="auth-header">
            <h2>{% trans "Sign In" %}</h2>
            <p>{% trans "Welcome back! Please sign in to continue." %}</p>
        </div>

        {% if form.errors %}
        <div class="alert alert-error">
            <i class="fas fa-exclamation-circle"></i>
            {% trans "Your username and password didn't match. Please try again." %}
        </div>
        {% endif %}

        <form class="auth-form" method="POST" action="{% url 'account_login' %}">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="id_login">
                    <i class="fas fa-envelope"></i> {% trans "Email or Username" %}
                </label>
                <input type="text" name="login" id="id_login" placeholder="Enter your email or username" 
                       value="{{ form.login.value|default:'' }}" required>
                {% if form.login.errors %}
                <div class="error-text">{{ form.login.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="id_password">
                    <i class="fas fa-lock"></i> {% trans "Password" %}
                </label>
                <input type="password" name="password" id="id_password" 
                       placeholder="Enter your password" required>
                <div class="password-toggle">
                    <i class="fas fa-eye" id="togglePassword"></i>
                </div>
                {% if form.password.errors %}
                <div class="error-text">{{ form.password.errors }}</div>
                {% endif %}
            </div>

            <div class="form-options">
                <label class="checkbox-label">
                    <input type="checkbox" name="remember" id="id_remember">
                    <span>{% trans "Remember me" %}</span>
                </label>
                <a href="{% url 'account_reset_password' %}" class="forgot-password">
                    {% trans "Forgot Password?" %}
                </a>
            </div>

            {% if redirect_field_value %}
            <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
            {% endif %}

            <button type="submit" class="btn btn-primary btn-block">
                <i class="fas fa-sign-in-alt"></i> {% trans "Sign In" %}
            </button>

            <div class="auth-divider">
                <span>{% trans "Or continue with" %}</span>
            </div>

            <div class="social-auth">
                <button type="button" class="btn btn-google">
                    <i class="fab fa-google"></i> Google
                </button>
                <button type="button" class="btn btn-github">
                    <i class="fab fa-github"></i> GitHub
                </button>
            </div>

            <div class="auth-footer">
                {% trans "Don't have an account?" %}
                <a href="{% url 'account_signup' %}" class="auth-link">{% trans "Sign Up" %}</a>
            </div>
        </form>
    </div>
</div>

<script>
    // Password toggle
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('id_password');
    
    togglePassword.addEventListener('click', function() {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        this.classList.toggle('fa-eye');
        this.classList.toggle('fa-eye-slash');
    });
</script>
{% endblock %}